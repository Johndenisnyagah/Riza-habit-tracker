<!DOCTYPE html>
<html lang="en">
  <!-- =========================================================
       Riza | Habits Page
       - Layout: 3 top equal-height cards + 1 full-width bottom card
       - Responsive, animated, dashboard-consistent
       ========================================================= -->
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Riza | Habits</title>

    <!-- Sidebar Styles -->
    <link rel="preload" href="/frontend/components/sidebar.css" as="style" />
    <link rel="stylesheet" href="/frontend/components/sidebar.css" />

    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />

    <!-- Main stylesheet -->
    <link rel="stylesheet" href="habits.css" />

    <!-- Lottie Animation -->
    <script
      src="https://unpkg.com/@lottiefiles/dotlottie-wc@0.8.5/dist/dotlottie-wc.js"
      type="module"
    ></script>
  </head>

  <body>
    <div class="dashboard-container">
      <!-- ========================= SIDEBAR ========================= -->
      <div id="sidebar-container"></div>

      <!-- ========================= MAIN ========================= -->
      <main class="main-content">
        <header class="dashboard-header">
          <button class="menu-toggle" aria-label="Open menu">
            <img
              src="/frontend/assets/icons/menu.svg"
              aria-hidden="true"
              class="menu-icon"
            />
          </button>
          <div class="header-text">
            <h1>Your Habits</h1>
            <p>Build consistency one step at a time</p>
          </div>
        </header>

        <!-- ===================== HABITS SECTION ===================== -->
        <section class="habits-section">
          <!-- Top Row -->
          <div class="habits-top">
            <!-- Combined: Add Habit + Motivation -->
            <div class="card daily-overview anim-1">
              <h3>
                <img
                  src="../assets/icons/sparkles.svg"
                  class="icon"
                  aria-hidden="true"
                />
                Daily Overview
              </h3>

              <!-- Add Habit Section -->
              <div class="add-habit-section">
                <div class="section-header">
                  <img
                    src="../assets/icons/plus-circle.svg"
                    class="section-icon"
                    aria-hidden="true"
                  />
                  <h4>Add New Habit</h4>
                </div>
                <p>Create a new habit to track</p>
                <button class="btn open-habit-modal">Get Started</button>
              </div>

              <!-- Divider -->
              <div class="section-divider"></div>

              <!-- Motivation Section -->
              <div class="motivation-section">
                <div class="motivation-content">
                  <blockquote id="motivationText">
                    "Small consistent steps lead to big changes."
                  </blockquote>
                  <div class="motivation-footer">
                    <span class="quote-category" id="quoteCategory"
                      >Consistency</span
                    >
                    <button
                      class="refresh-quote"
                      id="refreshQuote"
                      title="Get new quote"
                    >
                      <img src="../assets/icons/refresh.svg" alt="Refresh" />
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- Stats Card -->
            <div class="card stats anim-2">
              <h3>
                <img
                  src="../assets/icons/stats.svg"
                  class="icon"
                  aria-hidden="true"
                />
                Stats
              </h3>
              <div class="stats-content">
                <div class="stat-item">
                  <div class="stat-icon">
                    <img src="../assets/icons/calendar.svg" alt="Calendar" />
                  </div>
                  <div class="stat-info">
                    <span class="stat-label">Total Check-ins</span>
                    <span class="stat-value" id="habits-total-checkins">0</span>
                  </div>
                </div>
                <div class="stat-item">
                  <div class="stat-icon">
                    <img src="../assets/icons/flame.svg" alt="Flame" />
                  </div>
                  <div class="stat-info">
                    <span class="stat-label">Longest Streak</span>
                    <span class="stat-value">
                      <strong id="habits-longest-streak">0</strong> days
                    </span>
                  </div>
                </div>
                <div class="stat-item">
                  <div class="stat-icon">
                    <img src="../assets/icons/target.svg" alt="Target" />
                  </div>
                  <div class="stat-info">
                    <span class="stat-label">Total Habits</span>
                    <span class="stat-value" id="habits-total-habits">0</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Streak -->
            <div class="card streak anim-3">
              <h3>
                <img
                  src="../assets/icons/flame.svg"
                  class="icon"
                  aria-hidden="true"
                />
                Current Streak
              </h3>
              <div class="streak-content">
                <div class="streak-flame-container">
                  <dotlottie-wc
                    id="habits-flame-animation"
                    src="https://lottie.host/56d7da74-9728-4b30-9850-2f882c814d31/JxaPzJMak3.lottie"
                    autoplay
                    loop
                  ></dotlottie-wc>
                  <div class="streak-overlay">
                    <span class="streak-number" id="habits-current-streak"
                      >7</span
                    >
                    <span class="streak-label">days</span>
                  </div>
                </div>
                <div class="streak-milestones">
                  <div class="milestone" id="habits-milestone-7">
                    <span class="milestone-icon">‚≠ê</span>
                    <span class="milestone-text">7 days</span>
                  </div>
                  <div class="milestone" id="habits-milestone-30">
                    <span class="milestone-icon">üèÜ</span>
                    <span class="milestone-text">30 days</span>
                  </div>
                  <div class="milestone" id="habits-milestone-100">
                    <span class="milestone-icon">üëë</span>
                    <span class="milestone-text">100 days</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Bottom: My Habits -->
          <div class="card habit-list anim-4">
            <h3>
              <img
                src="../assets/icons/list-tree.svg"
                class="icon"
                aria-hidden="true"
              />
              My Habits
            </h3>

            <!-- Filter buttons -->
            <div class="habit-filters">
              <button class="filter-btn active" data-filter="all">All</button>
              <button class="filter-btn" data-filter="daily">Daily</button>
              <button class="filter-btn" data-filter="weekdays">
                Weekdays
              </button>
              <button class="filter-btn" data-filter="weekends">
                Weekends
              </button>
              <button class="filter-btn" data-filter="custom">Custom</button>
            </div>

            <!-- Unified summary list for shared JS -->
            <ul id="habit-list" class="habit-list" aria-live="polite"></ul>
          </div>
        </section>
      </main>
    </div>

    <!-- ===================== HABIT MODAL ===================== -->
    <div id="habit-modal" class="modal" aria-hidden="true">
      <div class="modal-content">
        <div class="modal-header">
          <h3 id="modal-title">Add New Habit</h3>
          <button class="close-modal" aria-label="Close">&times;</button>
        </div>

        <div class="modal-body">
          <form id="habit-form">
            <!-- Name field -->
            <div class="form-group">
              <label for="habit-name">Habit Name</label>
              <input
                type="text"
                id="habit-name"
                required
                placeholder="e.g., Morning Meditation"
              />
            </div>

            <!-- Description field -->
            <div class="form-group">
              <label for="habit-description">Description (Optional)</label>
              <textarea
                id="habit-description"
                placeholder="Why this habit matters to you..."
              ></textarea>
            </div>

            <!-- Frequency selection -->
            <div class="form-group">
              <label>Frequency</label>
              <div class="frequency-options">
                <button
                  type="button"
                  class="freq-btn active"
                  data-value="daily"
                >
                  Daily
                </button>
                <button type="button" class="freq-btn" data-value="weekdays">
                  Weekdays
                </button>
                <button type="button" class="freq-btn" data-value="weekends">
                  Weekends
                </button>
                <button type="button" class="freq-btn" data-value="custom">
                  Custom
                </button>
              </div>
            </div>

            <!-- Custom days (hidden by default) -->
            <div class="form-group custom-days hidden">
              <div class="day-checkboxes">
                <label><input type="checkbox" value="mon" /> Mon</label>
                <label><input type="checkbox" value="tue" /> Tue</label>
                <label><input type="checkbox" value="wed" /> Wed</label>
                <label><input type="checkbox" value="thu" /> Thu</label>
                <label><input type="checkbox" value="fri" /> Fri</label>
                <label><input type="checkbox" value="sat" /> Sat</label>
                <label><input type="checkbox" value="sun" /> Sun</label>
              </div>
            </div>

            <!-- Icon selection -->
            <div class="form-group">
              <label>Choose Icon</label>
              <div class="icon-selector" id="icon-selector">
                <!-- Icons will be loaded dynamically from habit-icons-config.js -->
              </div>
            </div>
          </form>
        </div>

        <div class="modal-footer">
          <button type="button" class="btn-outline cancel-btn">Cancel</button>
          <button type="button" class="btn save-btn">Save Habit</button>
          <button type="button" class="btn-danger delete-btn hidden">
            Delete
          </button>
        </div>
      </div>
    </div>

    <!-- ==================== SCRIPTS ==================== -->
    <!-- Main application script (sidebar loader, etc) -->
    <script src="/frontend/main.js"></script>
    <!-- Daily motivation quotes module -->
    <script src="../shared/daily-motivation.js"></script>
    <!-- Habits-specific functionality - uses shared components -->
    <script type="module" src="habits.js"></script>
  </body>
</html>
